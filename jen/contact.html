<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jensen | Contact</title>
    <link rel="shortcut icon" href="https://guyotjs.github.io/duckclear.png" type="image/x-icon">
    <link rel="stylesheet" href="./static/global.css">
    <link rel="stylesheet" href="https://guyotjs.github.io/bcss/bc.css">
    <link rel="stylesheet" href="https://guyotjs.github.io/bcss/bc-colors.css">
    <link rel="stylesheet" href="./static/hist-global.css">
  </head>
  <body data='{
    "ids":[],
    "names":[],
    "phones":[],
    "emails":[],
    "addresses":[],
    "showWhich":0
  }' class="p-xl">
    <div class="text-center mb-xl">
      <p class="f-xl">
        The <span class="grad bold"><abbr title="Lynn & Donnelle Jensen Family">Jensen</abbr></span> Family
      </p><br/>
    </div>
    <fieldset class="grid-2 r p-m text-center left-center relative w-responsive border-light pre-lev">
      <legend class="ml-m text-left" >Information</legend>
      <div class="border-bottom-light" for="ids" item="p" item-class="m text-right gray"></div>
      <div class="border-bottom-light" for="names" item="p" item-attr="onclick" attr-val="zoom(this)" item-class="hover-underline text-left m"></div>
    </fieldset>
    <div class="hiddenModal absolute true-center p-m pre-lev bg-white r">
      <p react class="m">
        Name: {{names[showWhich]}}
      </p>
      <p react class="m">
        Phone: {{phones[showWhich]}}
      </p>
      <p react class="m">
        Email: {{emails[showWhich]}}
      </p>
      <p react class="m">
        Address: {{addresses[showWhich]}}
      </p>
      <button onclick="hide()" class="m border-light p-sm bg-white hover-border">Hide</button>
    </div>
    <script src="./static/sno-noAuto.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="./static/cookies.js"></script>
    <script>
      const sbase = supabase.createClient('https://parijdyqnbbiaffwsjzh.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBhcmlqZHlxbmJiaWFmZndzanpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjg5MTUzOTQsImV4cCI6MjA0NDQ5MTM5NH0.cgJPJRmGA5gDhtU7z7S1f1Pdyxt5j5kL79fPOR9_nro')
      async function validate(){
        const { data: signed, error } = await sbase.auth.signInWithPassword({
          email: getCookie("user"),
          password: getCookie("pass"),
        });
        if(signed.user != null){
          console.log("Signed In!");
          run();
        }else{
          window.location.href = "./index.html"
        }
      };validate();
      async function run(){
        let { data: people, error } = await sbase
          .from('people')
          .select('*');
        for(let i=0;i<people.length;i++){
          data.ids.push(people[i].id)
          data.names.push(people[i].name)
          data.phones.push(people[i].phone)
          data.emails.push(people[i].email)
          data.addresses.push(people[i].address)
        }
        renderFors();
        click = parseClicker();
      };
      $(".hiddenModal").hide();
      var zoom = (elem) =>{
        let element = elem;
        let certainLocation;
        for(let i=0;i<data.names.length;i++){
          if(element.innerText == data.names[i]){
            certainLocation = i;
          }
        }
        data.showWhich = certainLocation;
        $(".hiddenModal").show();
      }
      var hide = () =>{
        $(".hiddenModal").hide();
      }
    </script>
  </body>
</html>